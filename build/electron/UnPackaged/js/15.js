(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{"23e2":function(t,l,o){},"3e18":function(t,l,o){"use strict";o.r(l);var e=function(){var t=this,l=t.$createElement,o=t._self._c||l;return o("div",{ref:"scrollEl",staticClass:"library-following q-pa-sm q-pb-md row justify-center"},[t._l(t.filteredChannels,(function(l){return o("ChannelCard",{key:l.id,attrs:{id:l.id,title:l.title,description:l.description,image:l.image,soul:l.soul,hidden:l.hidden,followers:t.lib.channelFollowerCount[l.id],followable:!1,blocked:t.blockMap[l.id]},on:{detail:t.showChannelDetail,follow:t.unfollow}})})),o("i"),o("i"),o("i"),o("i"),o("i"),o("i"),o("i"),o("i"),t.followings.length?t._e():o("div",{staticClass:"no-data"},[o("q-btn",{staticClass:"no-data-btn",attrs:{round:"",color:"primary",icon:"arrow_forward",size:"24px"},on:{click:t.goToExplore}},[o("q-tooltip",[t._v(t._s(t.$t("no_following"))+" "+t._s(t.$t("lib_explore")))])],1)],1),o("BackToTop",{attrs:{show:t.scrollOffset>0},on:{click:t.scrollTop}}),o("SearchChannel",{attrs:{higher:t.scrollOffset>0}})],2)},s=[],i=o("4aad"),n=o("5ea8"),a=o("6277"),r=o("1c16"),c=o("0ebe"),h={name:"LibraryFollowing",components:{ChannelCard:n["a"],SearchChannel:a["a"],BackToTop:c["a"]},data(){return{scrollOffset:0,lib:i["a"]}},computed:{followings(){return this.lib.followingChannels.filter((t=>t.title&&t.id))},blockMap(){const t={};return i["a"].userData&&i["a"].userData.blockChannels?(this.followings.forEach((l=>{(i["a"].userData.blockChannels.includes(l.id)||i["a"].userData.blockUsers.includes(l.creator))&&(t[l.id]=!0)})),t):t},filteredChannels(){const t=i["a"].search.text.toLowerCase();if(!t)return this.followings;const l=i["a"].search.option.value,o=t=>{switch(l){case"channelID":return t.id;default:return t.title}},e=l=>{const e=o(l);return null===e||void 0===e?void 0:e.toLowerCase().includes(t)};return this.followings.filter(e)}},methods:{scrollTop(){this.$refs.scrollEl.scrollTo(0,0)},showChannelDetail(t){const l=this.followings.find((l=>l.id===t));console.log("to",l);const o=["id","title"].map((t=>{const o=l[t];return encodeURIComponent(t)+"="+encodeURIComponent(o)})).join("&"),e=`/library/channel?${o}`;this.$root.$emit("navigate-to",e),this.$router.push(e)},unfollow(t){this.$q.dialog({title:this.$t("unfollow"),message:this.$t("unfollow_confirm"),ok:this.$t("unfollow"),cancel:this.$t("cancel")}).onOk((()=>{i["a"].unfollowChannel(t)}))},goToExplore(){this.$root.$emit("navigate-to"),this.$router.push("/library/explore")},setSearch(){this.lib.setSearchOption([{label:this.$t("title"),value:"channel"},{label:this.$t("channel_id"),value:"channelID"}])}},activated(){this.setSearch(),this.$root.$emit("navigate-to"),this.$root.$emit("navigate-to","/library/following"),this.$refs&&this.$refs.scrollEl&&this.$refs.scrollEl.scrollTo(0,this.scrollOffset)},mounted(){this.setSearch(),this.$refs&&this.$refs.scrollEl&&this.$refs.scrollEl.addEventListener("scroll",Object(r["a"])((()=>{this.scrollOffset=this.$refs.scrollEl.scrollTop})))}},f=h,d=(o("68c6"),o("2877")),u=o("9c40"),w=o("05c0"),p=o("eebe"),$=o.n(p),b=Object(d["a"])(f,e,s,!1,null,"42ff5a57",null);l["default"]=b.exports;$()(b,"components",{QBtn:u["a"],QTooltip:w["a"]})},"68c6":function(t,l,o){"use strict";o("23e2")}}]);